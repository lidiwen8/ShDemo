# ShDemo
基于struts2+hibernate的增删改查以及分页
项目整体采用之前学习的struts2+hibernate来实现，既巩固了之前所学的知识，又整合了struts2和hibernate，前者作为控制层，后者作为数据持久化层。实现了对父子表的增删改查以及分页等功能，加强了实操技能，将学会的理论知识付诸于实践的小项目中，增强了学习兴趣，对以后找工作埋下了很好的基础。
实验步骤: 
基础项目搭建：
创建工程，导入jar包，创号目录结构（良好的分层体系架构，注重代码可读性）


导入相关的依赖

分别建立产品表和种类表
一个种类下下有多个产品
一个产品只能对应一个种类
1.创建Category类和Product类






2.使用XML映射文件进行关联映射配置







3.配置hibernate.cfg.xml文件（用到了C3P0连接池技术）



4.配置web.xml

5.创建action





6.创建提供连接和关闭的HibernateUtil：


7.创建分页的pojo类：



8.创建dao类，主要是些增删改查，分页之类的








9.创建struts.xml，配置与action的映射：




10.创建必要的jsp页面，用于直观展示，比在控制台更为直观反应：



运行整个项目，控制台没有任何报错，并且在数据库生成了相对应的表，说明配置暂时没有问题，这时来验证页面的增删改查：

数据库里面生成了product_、category_,并且通过查看外键，已经成功成为父子表关系






输入配置好的url打开界面，界面只是为了显示，没有美化：
http://localhost:8080/listProduct






下面我们来添加产品种类，也就是父表内容：




数据表也有了数据：

控制台已经输出插入的hql语句：


分页做的是每页显示三条记录，下面我们多增加几个分类好看到效果：



继续添加，一共添加了四条记录，应该有两页，显示出来的与预期相符，说明程序应该没多大问题：




下面我们执行编辑操作，把饮料改成功能性饮料：

更新成功



下面我们在子表没有数据的情况下执行父表删除一条记录的操作，把素食种类删除：



可以看到现在记录数变成了三条：


经过上述验证，对父表的增删改查没有任何问题；下面我们来对子表进行增删改查：





下面多添加一些产品，便于分页效果：

一共添加了七条记录：
下面点击下一页：

点击末页：

点击首页：

经验证分页功能良好，未出现任何错误；

下面我们来编辑产品，把红牛改成红牛A，价格变为5.8：




下面删除产品牙膏：


现在记录变成了6条；

下面把浴巾的产品种类改为婴幼儿奶粉：




经验证子表的增删改查以及分页查询都没问题；

下面我们删除父表的记录，删除生活用品这个类别，看子表是否有改变，在hibernate中已经配置了级联删除：





子表：


发现子表记录中只要是属于生活用品的记录已经被删除了，说明级联删除有效
